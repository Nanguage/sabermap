(this.webpackJsonpsabermap=this.webpackJsonpsabermap||[]).push([[0],{173:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},514:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(17),r=n.n(c),l=(n(323),n(10)),s=(n(173),n(572)),o=(n(324),n(43)),u=n(284),j=n(562),d=n(517),h=n(26),b=n(2),f=Object(o.a)((function(e){return Object(u.a)({})}));var O,x,p,g,m,v,w,k=function(e){var t=e.flow,n=e.setFlow,a=e.activeFlow,i=(f(),"tensorsite-card ".concat(a&&a.id===t.id?"active":""));return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",height:"100%",onClick:function(){return n(t)},children:t.name})})},y=n(76),N=(Object(h.gql)(O||(O=Object(y.a)(["\n    query {\n        get_agents {\n            id\n            name\n            labels\n            address\n        }\n    }\n"]))),Object(h.gql)(x||(x=Object(y.a)(["\n    query($input: GetFlowsInput!) {\n        get_flows(input: $input) {\n            id\n            name\n            full_name\n            labels\n            tasks {\n                id\n                name\n                full_name\n                labels\n                flow_id\n                output {\n                    id\n                    task_id\n                    flow_id\n                }\n                docstring\n                context\n            }\n            edges {\n                channel_id\n                task_id\n            }\n            docstring\n            serialized_flow\n            context\n        }\n    }\n"])))),_=Object(h.gql)(p||(p=Object(y.a)(["\n    query($input: GetFlowRunsInput!) {\n        get_flowruns(input: $input) {\n            id\n            agent_id\n            flow_id\n            name\n            labels\n            context\n            state {\n                state_type\n                result\n                message\n            }\n            start_time\n            end_time\n            last_heartbeat\n        }\n    }\n"]))),S=Object(h.gql)(g||(g=Object(y.a)(["\n    query($input: GetTaskRunsInput!) {\n        get_taskruns(input: $input) {\n            id\n            state {\n                state_type\n            }\n        }\n    }\n"]))),C=Object(h.gql)(m||(m=Object(y.a)(["\n    query($input: GetTaskRunsInput!) {\n        get_taskruns(input: $input) {\n            id\n            flowrun_id\n            agent_id\n            task_id\n            context\n            start_time\n            end_time\n            last_heartbeat\n            state {\n                state_type\n                result\n                message\n            }\n        }\n    }\n"]))),I=Object(h.gql)(v||(v=Object(y.a)(["\n    query($input: GetRunLogsInput!) {\n        get_runlogs(input: $input) {\n            id\n            level\n            time\n            message\n            task_id\n            flow_id\n            taskrun_id\n            flowrun_id\n            agent_id\n        }\n    }\n"]))),T=(Object(h.gql)(w||(w=Object(y.a)(["\n    mutation($input: FlowRunInput!) {\n        update_flowrun(input: $input) {\n            id\n        }\n    }\n"]))),n(105)),R=n(564),E=Object(o.a)((function(e){return Object(u.a)({root:{height:"100px",width:"100%"}})}));var F=function(e){var t=e.flowrun,n=e.setFlowRun,a=e.activeFlowrun,i=(E(),"tensorsite-card ".concat(a&&a.id===t.id?"active":""));return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",onClick:function(){return n(t)},children:t.name})})},L=n(28),P=n(298),q=n(569),z=n(573),D=n(570),G=n(29),$=n(25),A=n(293),B=n.n(A),M=n(294),H=n.n(M),W=n(197),Q=n(162);function V(e,t,n,a){if(n<=0)return[];for(var i=t/(n+=1),c=[],r=0,l=0;l<n;l++)r+=i,c.push({top:r});return c}function Y(e){var t=e.data,n=e.children,a=e.className,i=e.width,c=void 0===i?100:i,r=e.height,l=void 0===r?100:r,o=e.isCircle,u=void 0!==o&&o,j=t,d=V(0,l,j.input.length),h=j.input.map((function(e,t){return Object(b.jsx)($.d,{type:"target",id:e,position:$.f.Left,style:Object(L.a)({background:"red"},d[t])},e)})),f=V(0,l,j.output.length),O=j.output.map((function(e,t){return Object(b.jsx)($.d,{type:"source",position:$.f.Right,id:e.id,style:Object(L.a)({background:"blue"},f[t])},e.id)}));return Object(b.jsxs)(s.a,{className:a,height:l,width:c,style:{borderRadius:u?"50%":"1%",padding:0},children:[h,n,O]})}var J=Object(a.memo)(Y),Z=n(563),K=Object(o.a)((function(e){return Object(u.a)({root:{padding:"5px",width:"100%",overflow:"hidden",flexWrap:"nowrap",justifyContent:"start",height:"80px"}})})),U=Object(o.a)((function(e){return Object(u.a)({root:{padding:"5px",color:"white",background:"#3474e0",opacity:.8,borderRadius:"10%",textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"}})}));function X(e){var t=e.task,n=K(),i=Object(h.useQuery)(S,{variables:{input:{flowrun_id:[t.flowrun_id],task_id:[t.id]}}}),c=i.loading,r=i.error,l=i.data,o=i.stopPolling,u=i.startPolling;Object(a.useEffect)((function(){return u(2e3),function(){o()}}),[]);var f=[];if(c||r)f=Array(5).fill(null);else{var O,x=new Map,p=Object(Q.a)(l.get_taskruns);try{for(p.s();!(O=p.n()).done;){var g=O.value.state.state_type;x.has(g)||x.set(g,{state:g,count:0}),x.get(g).count+=1}}catch(m){p.e(m)}finally{p.f()}x.forEach((function(e,t){f.push(e)}))}return Object(b.jsx)(j.a,{container:!0,direction:"column",className:n.root,children:f.map((function(e,t){return e?Object(b.jsxs)(s.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:[Object(b.jsx)(s.a,{children:Object(b.jsx)(d.a,{variant:"subtitle2",children:e.count})}),Object(b.jsx)(s.a,{style:{marginLeft:5,marginRight:5},children:Object(b.jsx)(Z.a,{style:{height:8,width:15}})}),Object(b.jsx)(s.a,{children:Object(b.jsx)(d.a,{variant:"subtitle2",children:e.state})})]},e.state):Object(b.jsxs)(s.a,{width:"100%",display:"flex",alignItems:"center",children:[Object(b.jsx)(R.a,{variant:"circle",height:"9px",width:"9px"}),Object(b.jsx)(R.a,{variant:"text",width:"100%"})]},t)}))})}var ee=function(e){var t=U(),n=Object($.j)((function(e){return e.transform})),a=Object(l.a)(n,3)[2]>=1.5,i=e.data,c=i.width,r=i.height,o=i,u=o.name.replace("Operator","").replace(/\[.*\]/g,"");return Object(b.jsx)(J,Object(L.a)(Object(L.a)({},e),{},{className:"".concat(t.root," nowheel"),height:r,width:c,children:Object(b.jsxs)(s.a,{width:"100%",children:[Object(b.jsx)(s.a,{children:Object(b.jsx)(d.a,{variant:"h5",children:u})}),Object(b.jsx)(s.a,{children:a&&i.flowrun_id?Object(b.jsx)(X,{task:o}):""})]})}))},te=Object(o.a)((function(e){return Object(u.a)({root:{color:"white",background:"#455064",borderRadius:"10%",textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"}})}));function ne(e){var t=e.id,n=e.data,a=n.width,i=n.height,c=te();return Object(b.jsxs)(s.a,{className:c.root,height:"".concat(i,"px"),width:"".concat(a,"px"),children:[Object(b.jsx)(s.a,{width:"100%",children:Object(b.jsx)(d.a,{children:"Channel"})}),Object(b.jsx)($.d,{type:"source",position:$.f.Right,id:t,style:{background:"blue"}})]})}var ae=Object(a.memo)(ne),ie=Object(o.a)((function(e){return Object(u.a)({root:{padding:"5px",color:"white",background:"#ff6f00",borderRadius:"10%",textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"}})}));function ce(e){var t=ie(),n=e.data,a=e.isCircle,i=void 0!==a&&a,c=n.width,r=n.height,l=n.name.replace("Operator","").replace(/\[.*\]/g,"");return Object(b.jsx)(J,Object(L.a)(Object(L.a)({},e),{},{isCircle:i,className:t.root,width:c,height:r,children:Object(b.jsx)(s.a,{width:"100%",overflow:"hidden",children:Object(b.jsx)(d.a,{children:l})})}))}var re=Object(a.memo)(ce),le=Object(o.a)((function(e){return Object(u.a)({controls:{position:"relative",top:"10px",left:"10px",zIndex:99999999999}})})),se={stroke:"#fff"},oe={taskNode:ee,operatorNode:re,channelNode:ae};var ue=new W.graphlib.Graph;ue.setDefaultEdgeLabel((function(){return{}}));var je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB",n="LR"===t;return ue.setGraph({rankdir:t}),e.forEach((function(e){Object($.i)(e)?ue.setNode(e.id,{width:e.data.width,height:e.data.height}):ue.setEdge(e.source,e.target)})),Object(W.layout)(ue),e.map((function(e){if(Object($.i)(e)){var t=ue.node(e.id);e.targetPosition=n?$.f.Left:$.f.Top,e.sourcePosition=n?$.f.Right:$.f.Bottom,e.position={x:t.x-e.data.width/2+Math.random()/1e3,y:t.y-e.data.height/2}}return e}))};var de=function(e){var t=e.flow,n=e.flowrun,i=(le(),Object(a.useState)(null)),c=Object(l.a)(i,2),r=c[0],o=c[1],u=Object(a.useState)([]),j=Object(l.a)(u,2),d=j[0],h=j[1];Object(a.useEffect)((function(){var e=function(e,t){if(!e)return[];var n=Object(G.a)(e.tasks),a=[],i=[],c=new Map;n.forEach((function(e){e.output.forEach((function(t){c.set(t.id,e.id)}))}));var r=new Map;e.edges.forEach((function(e,t){var n=e.channel_id,l=e.task_id;r.has(l)||r.set(l,[]);var s=r.get(l),o="".concat(n,"-").concat(s.length);s.push(o),c.get(n)||(c.set(n,n),i.push({id:n,type:"channelNode",data:{label:"Input Channel",width:50,height:25},position:{x:0,y:0},sourcePosition:"right"})),a.push({id:"".concat(n,"|").concat(l,"|").concat(t),source:c.get(n),target:l,sourceHandle:n,targetHandle:o,animated:!0})}));var l=n.map((function(e){var n=e.context.task_config.name.startsWith("Operator");return{id:e.id,type:n?"operatorNode":"taskNode",data:Object(L.a)(Object(L.a)({},e),{},{input:r.get(e.id)||[],width:n?40:80,height:n?40:120,flowrun_id:n||!t?null:t.id}),position:{x:0,y:0}}}));return[].concat(Object(G.a)(l),i,a)}(t,n),a=je(e,"LR");h(a)}),[t,n]),Object(a.useEffect)((function(){r&&d.length>0&&r.fitView()}),[t,d.length]);var f=Object(a.useCallback)((function(e){}),[]),O=Object(a.useCallback)((function(e){r||o(e)}),[r]),x=Object(a.useCallback)((function(e){var t=je(d,e);h(t)}),[d]);return Object(b.jsx)(s.a,{height:"100%",width:"100%",children:Object(b.jsx)($.g,{children:Object(b.jsxs)($.h,{elements:d,onConnect:f,onLoad:O,nodeTypes:oe,connectionLineStyle:se,connectionLineType:$.a.SmoothStep,snapToGrid:!0,snapGrid:[2,2],defaultZoom:1,onlyRenderVisibleElements:!0,children:[Object(b.jsx)($.e,{nodeStrokeColor:function(e){return"taskNode"===e.type?"#3474e0":"operatorNode"===e.type?"#ff6f00":"channelNode"===e.type?"red":"#fff"},nodeColor:function(e){return"taskNode"===e.type?"#3474e0":"operatorNode"===e.type?"#ff6f00":"channelNode"===e.type?"#455064":"#fff"}}),Object(b.jsxs)($.c,{children:[Object(b.jsx)($.b,{onClick:function(){return x("LR")},children:Object(b.jsx)(B.a,{})}),Object(b.jsx)($.b,{onClick:function(){return x("TB")},children:Object(b.jsx)(H.a,{})})]})]})})})};var he=function(e){return Object(b.jsx)(de,Object(L.a)({},e))},be=n(202),fe=n(205),Oe=n(166),xe=Object(o.a)((function(){return Object(u.a)({root:{alignItems:"center",lineHeight:"24px",width:"100%",height:"100%",position:"relative",display:"flex","& .cellValue":{whiteSpace:"nowrap",overflow:"auto",textOverflow:"ellipsis"}}})})),pe=i.a.memo((function(e){var t=e.width,n=e.value,a=i.a.useRef(null),c=i.a.useRef(null),r=i.a.useRef(null),s=i.a.useState(null),o=Object(l.a)(s,2),u=o[0],j=o[1],h=xe(),f=i.a.useState(!1),O=Object(l.a)(f,2),x=O[0],p=O[1],g=i.a.useState(!1),m=Object(l.a)(g,2),v=m[0],w=m[1];return i.a.useEffect((function(){if(x)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||p(!1)}}),[p,x]),Object(b.jsxs)("div",{ref:a,className:h.root,onMouseEnter:function(){var e=Object(Oe.c)(r.current);w(e),j(c.current),p(!0)},onMouseLeave:function(){p(!1)},children:[Object(b.jsx)("div",{ref:c,style:{height:1,width:t,display:"block",position:"absolute",top:0}}),Object(b.jsx)("div",{ref:r,className:"cellValue",children:n}),v&&Object(b.jsx)(fe.a,{open:x&&null!==u,anchorEl:u,style:{width:t,marginLeft:-17},children:Object(b.jsx)(be.a,{elevation:1,style:{minHeight:a.current.offsetHeight-3},children:Object(b.jsx)(d.a,{variant:"body2",style:{padding:8,overflowWrap:"anywhere"},children:n})})})]})}));var ge=[{field:"level",headerName:"Level"},{field:"message",headerName:"Message",flex:1,renderCell:function(e){return Object(b.jsx)(pe,{value:e.value?e.value.toString():"",width:400})}},{field:"time",headerName:"Time",type:"number"},{field:"id",headerName:"ID"},{field:"task_id",headerName:"TaskID",hide:!0},{field:"flow_id",headerName:"FlowID",hide:!0},{field:"taskrun_id",headerName:"TaskRunID",hide:!0},{field:"flowrun_id",headerName:"FlowRunID",hide:!0},{field:"agent_id",headerName:"AgentID",hide:!0}];function me(){return Object(b.jsx)(be.a,{children:"Logs filter"})}var ve=function(e){e.flow;var t=e.flowrun,n=Object(h.useQuery)(I,{variables:{input:{flowrun_id:t?[t.id]:["NoSuchId"]}}}),a=n.loading,i=(n.error,n.data);return Object(b.jsxs)(s.a,{height:"100%",children:[Object(b.jsx)(me,{}),Object(b.jsx)(s.a,{height:"80%",style:{overflow:"auto"},children:Object(b.jsx)(Oe.a,{rows:a?[]:i.get_runlogs,columns:ge,autoHeight:!0,loading:!0,components:{Toolbar:Oe.b}})})]})},we=Array(15).fill(null),ke=Object(o.a)((function(e){return Object(u.a)({taskrunsPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})}));Object(o.a)((function(e){return Object(u.a)({})}));function ye(e){var t=e.taskrun,n=e.activeTaskrun,a=e.setTaskrun,i="tensorsite-card ".concat(n&&n.id===t.id?"active":"");return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",height:"100%",onClick:function(){return a(t)},children:t.id})})}var Ne=function(e){var t=e.flowrun,n=e.task,i=ke(),c=Object(a.useState)(null),r=Object(l.a)(c,2),o=r[0],u=r[1],f=Object(h.useQuery)(C,{variables:{input:{flowrun_id:t?[t.id]:["NOT_SET"],task_id:n?[n.id]:["NOT_SET"]}}}),O=f.data,x=f.loading,p=f.error,g=f.startPolling,m=f.stopPolling;Object(a.useEffect)((function(){return t&&n&&g(2e3),function(){m()}}),[t,n]);var v=t&&n?x||p?we:O.get_taskruns:[],w=Object(b.jsxs)(j.a,{className:i.taskrunsPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:i.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h5",children:"TaskRuns"})})}),Object(b.jsx)(j.a,{className:i.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:v.map((function(e,t){return e?Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(ye,{taskrun:e,setTaskrun:u,activeTaskrun:o})},e.id):Object(b.jsx)(j.a,{item:!0,children:Object(b.jsxs)(s.a,{height:"100px",children:[Object(b.jsx)(R.a,{variant:"text",width:"40%"}),Object(b.jsx)(R.a,{variant:"text"}),Object(b.jsx)(R.a,{variant:"rect",height:"60%"})]})},t)}))})]});return Object(b.jsx)(s.a,{height:"100%",width:"100",children:w})},_e=Object(o.a)((function(e){return Object(u.a)({tasksPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})})),Se=Object(o.a)((function(e){return Object(u.a)({})}));function Ce(e){var t=e.task,n=e.setTask,a=e.activeTask,i=(Se(),"tensorsite-card ".concat(a&&a.id===t.id?"active":""));return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",height:"100%",onClick:function(){return n(t)},children:t.name})})}var Ie=function(e){var t=e.flow,n=e.flowrun,i=_e(),c=Object(a.useState)(null),r=Object(l.a)(c,2),o=r[0],u=r[1],h=(t?t.tasks:[]).filter((function(e){return!e.name.startsWith("Operator")}));Object(a.useEffect)((function(){!o&&h.length>0?u(t.tasks[0]):t||u(null)}),[t]);var f=Object(b.jsxs)(j.a,{className:i.tasksPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:i.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h5",children:"Tasks"})})}),Object(b.jsx)(j.a,{className:i.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:h.map((function(e){return Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(Ce,{task:e,activeTask:o,setTask:u})},e.id)}))})]});return Object(b.jsx)(s.a,{height:"100%",width:"100%",children:Object(b.jsxs)(T.a,{split:"vertical",defaultSize:"50%",maxSize:600,minSize:100,style:{height:"100%"},children:[Object(b.jsx)(s.a,{height:"100%",children:f}),Object(b.jsx)(s.a,{height:"100%",children:Object(b.jsx)(Ne,{flowrun:n,task:o})})]})})};function Te(e){var t=e.children,n=e.value,a=e.index,i=Object(P.a)(e,["children","value","index"]);return Object(b.jsx)("div",Object(L.a)(Object(L.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),{},{style:{height:"100%"},children:n===a&&Object(b.jsx)(s.a,{height:"100%",children:t})}))}function Re(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Ee=Object(o.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column"}}}));function Fe(e){var t=e.flow,n=e.flowrun,a=Ee(),c=i.a.useState(0),r=Object(l.a)(c,2),o=r[0],u=r[1];return Object(b.jsxs)(s.a,{className:a.root,height:"100%",children:[Object(b.jsx)(q.a,{position:"static",children:Object(b.jsxs)(z.a,{value:o,onChange:function(e,t){u(t)},children:[Object(b.jsx)(D.a,Object(L.a)({label:"Graph"},Re(0))),Object(b.jsx)(D.a,Object(L.a)({label:"Tasks"},Re(1))),Object(b.jsx)(D.a,Object(L.a)({label:"Logs"},Re(2)))]})}),Object(b.jsx)(Te,{value:o,index:0,children:Object(b.jsx)(he,{flow:t,flowrun:n})}),Object(b.jsx)(Te,{value:o,index:1,children:Object(b.jsx)(Ie,{flow:t,flowrun:n})}),Object(b.jsx)(Te,{value:o,index:2,children:Object(b.jsx)(ve,{flow:t,flowrun:n})})]})}var Le=Object(o.a)((function(e){return Object(u.a)({flowrunsPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})}));var Pe=function(e){var t=e.flow,n=e.flowruns,i=Le(),c=Object(a.useState)(null),r=Object(l.a)(c,2),o=r[0],u=r[1];Object(a.useEffect)((function(){u(null)}),[t]),console.log(o);var h=Object(b.jsxs)(j.a,{className:i.flowrunsPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:i.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h4",children:"Flow Runs"})})}),Object(b.jsx)(j.a,{className:i.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:n.map((function(e,t){return e?Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(F,{flowrun:e,setFlowRun:u,activeFlowrun:o})},e.id):Object(b.jsx)(j.a,{item:!0,children:Object(b.jsxs)(s.a,{height:"100px",children:[Object(b.jsx)(R.a,{variant:"text",width:"40%"}),Object(b.jsx)(R.a,{variant:"text"}),Object(b.jsx)(R.a,{variant:"rect",height:"60%"})]})},t)}))})]});return Object(b.jsxs)(T.a,{split:"vertical",defaultSize:"15vw",maxSize:300,minSize:100,children:[Object(b.jsx)(s.a,{height:"100%",children:h}),Object(b.jsx)(s.a,{height:"100%",children:Object(b.jsx)(Fe,{flow:t,flowrun:o})})]})},qe=n(8),ze=n(12),De=n(574),Ge=n(577),$e=Object(qe.a)((function(e){return{root:{backgroundColor:e.palette.grey[100],height:e.spacing(3),color:e.palette.grey[800],fontWeight:e.typography.fontWeightRegular,"&:hover, &:focus":{backgroundColor:e.palette.grey[300]},"&:active":{boxShadow:e.shadows[1],backgroundColor:Object(ze.c)(e.palette.grey[300],.12)}}}}))(Ge.a);var Ae=function(e){var t=e.pathList,n=e.onClick;return Object(b.jsx)(De.a,{children:t.map((function(e){return Object(b.jsx)($e,{component:"a",href:e.link,label:e.label,icon:e.icon,onClick:n(e.label)},e.label)}))})},Be=n(296),Me=n.n(Be),He=n(125),We=n.n(He),Qe=Array(15).fill(null),Ve=[{link:"#",label:"Home",icon:Object(b.jsx)(Me.a,{})},{link:null,label:"Flow",icon:Object(b.jsx)(We.a,{})},{link:null,label:"Task",icon:Object(b.jsx)(We.a,{})},{link:null,label:"FlowRun",icon:Object(b.jsx)(We.a,{})},{link:null,label:"TaskRun",icon:Object(b.jsx)(We.a,{})}],Ye=Object(o.a)((function(e){return Object(u.a)({flowsPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})}));var Je=function(e){var t=e.flows,n=Ye(),i=Object(a.useState)(null),c=Object(l.a)(i,2),r=c[0],o=c[1],u=Object(a.useState)(Ve),f=Object(l.a)(u,2),O=f[0],x=(f[1],r?[r.id]:[]),p=Object(h.useQuery)(_,{variables:{input:{flow_id:x}}}),g=p.loading,m=p.error,v=p.data,w=p.startPolling,y=p.stopPolling;Object(a.useEffect)((function(){return w(4e3),function(){y()}}),[]);var N=Object(b.jsxs)(j.a,{className:n.flowsPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:n.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h4",children:"Flows"})})}),Object(b.jsx)(j.a,{className:n.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:t.map((function(e,t){return e?Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(k,{flow:e,activeFlow:r,setFlow:o})},e.id):Object(b.jsx)(j.a,{item:!0,children:Object(b.jsxs)(s.a,{height:"100px",children:[Object(b.jsx)(R.a,{variant:"text",width:"40%"}),Object(b.jsx)(R.a,{variant:"text"}),Object(b.jsx)(R.a,{variant:"rect",height:"60%"})]})},t)}))})]});return Object(b.jsxs)(s.a,{height:"100%",children:[Object(b.jsx)(s.a,{height:"8vh",children:Object(b.jsx)(Ae,{pathList:O,onClick:function(e){}})}),Object(b.jsx)(s.a,{height:"80vh",children:Object(b.jsxs)(T.a,{split:"vertical",defaultSize:"15vw",maxSize:300,minSize:100,style:{height:"80vh"},children:[Object(b.jsx)(s.a,{height:"100%",children:N}),Object(b.jsx)(s.a,{height:"100%",children:Object(b.jsx)(Pe,{flow:r,flowruns:g||m?Qe:v.get_flowruns})})]})})]})},Ze=Array(15).fill(null),Ke=Object(o.a)((function(e){return Object(u.a)({panel:{height:"100%",width:"100%"}})}));var Ue=function(){Ke();var e=Object(h.useQuery)(N,{variables:{input:{}},pollInterval:5e3}),t=e.loading,n=e.error,a=e.data;return Object(b.jsx)(s.a,{height:"100%",width:"100%",children:Object(b.jsx)(Je,{flows:t||n?Ze:a.get_flows})})},Xe=n(571),et=n(209),tt=n(568),nt=n(198),at=n.n(nt),it=n(89),ct=n(297),rt=n.n(ct),lt=Object(o.a)((function(e){return Object(u.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:200,flexDirection:"row",zIndex:999999999999},input:{flex:1},iconButton:{padding:10},divider:{height:28,margin:4}})})),st=Object(o.a)((function(e){return Object(u.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function ot(e){var t=e.server,n=e.setServer,i=lt(),c=Object(a.useState)(t),r=Object(l.a)(c,2),s=r[0],o=r[1];return Object(b.jsxs)(be.a,{className:i.root,children:[Object(b.jsx)(it.a,{className:i.iconButton,children:Object(b.jsx)(at.a,{})}),Object(b.jsx)(et.a,{className:i.input,placeholder:"Server address",defaultValue:t,onChange:function(e){o(e.target.value)}}),Object(b.jsx)(Xe.a,{className:i.divider,orientation:"vertical"}),Object(b.jsx)(it.a,{color:"primary",className:i.iconButton,onClick:function(){n(s)},children:Object(b.jsx)(rt.a,{})})]})}var ut=function(e){var t=e.server,n=e.setServer,a=st();return Object(b.jsx)(s.a,{className:a.root,children:Object(b.jsx)(q.a,{position:"fixed",color:"secondary",children:Object(b.jsxs)(tt.a,{children:[Object(b.jsx)(it.a,{edge:"start",className:a.menuButton,children:Object(b.jsx)(at.a,{})}),Object(b.jsx)(d.a,{variant:"h6",className:a.title,children:"Flowsaber"}),Object(b.jsx)(ot,{server:t,setServer:n})]})})})},jt=n(565),dt=n(102),ht=Object(dt.a)({palette:{primary:{main:"#ff6f00"},secondary:{main:"#fff"}},typography:{fontSize:15}});var bt=function(){var e=Object(a.useState)("https://flowsaber.herokuapp.com/graphql/"),t=Object(l.a)(e,2),n=t[0],i=t[1],c=new h.ApolloClient({uri:n,cache:new h.InMemoryCache});return Object(b.jsx)(jt.a,{theme:ht,children:Object(b.jsxs)(s.a,{className:"App",height:"100vh",children:[Object(b.jsx)(s.a,{height:"10vh",children:Object(b.jsx)(ut,{server:n,setServer:i})}),Object(b.jsx)(h.ApolloProvider,{client:c,children:Object(b.jsx)(Ue,{})})]})})},ft=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,578)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(bt,{})}),document.getElementById("root")),ft()}},[[514,1,2]]]);
//# sourceMappingURL=main.0fe4e953.chunk.js.map