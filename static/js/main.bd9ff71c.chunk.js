(this.webpackJsonpsabermap=this.webpackJsonpsabermap||[]).push([[0],{161:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},489:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(16),r=n.n(c),l=(n(300),n(8)),s=(n(161),n(562)),o=(n(301),n(206)),u=n(261),j=n(545),d=n(494),h=n(564),b=n(2),f=Object(o.a)((function(e){return Object(u.a)({})}));var O,x,p,g,m,v,w,k=function(e){var t=e.flow,n=e.setFlow,a=e.activeFlow,i=(f(),"tensorsite-card ".concat(a&&a.id===t.id?"active":""));return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",height:"100%",onClick:function(){return n(t)},children:t.name})})},y=n(67),N=n(561),_=(Object(N.a)(O||(O=Object(y.a)(["\n    query {\n        get_agents {\n            id\n            name\n            labels\n            address\n        }\n    }\n"]))),Object(N.a)(x||(x=Object(y.a)(["\n    query($input: GetFlowsInput!) {\n        get_flows(input: $input) {\n            id\n            name\n            full_name\n            labels\n            tasks {\n                id\n                name\n                full_name\n                labels\n                flow_id\n                output {\n                    id\n                    task_id\n                    flow_id\n                }\n                docstring\n                context\n            }\n            edges {\n                channel_id\n                task_id\n            }\n            docstring\n            serialized_flow\n            context\n        }\n    }\n"])))),S=Object(N.a)(p||(p=Object(y.a)(["\n    query($input: GetFlowRunsInput!) {\n        get_flowruns(input: $input) {\n            id\n            agent_id\n            flow_id\n            name\n            labels\n            context\n            state {\n                state_type\n                result\n                message\n            }\n            start_time\n            end_time\n            last_heartbeat\n        }\n    }\n"]))),C=Object(N.a)(g||(g=Object(y.a)(["\n    query($input: GetTaskRunsInput!) {\n        get_taskruns(input: $input) {\n            id\n            state {\n                state_type\n            }\n        }\n    }\n"]))),T=Object(N.a)(m||(m=Object(y.a)(["\n    query($input: GetTaskRunsInput!) {\n        get_taskruns(input: $input) {\n            id\n            flowrun_id\n            agent_id\n            task_id\n            context\n            start_time\n            end_time\n            last_heartbeat\n            state {\n                state_type\n                result\n                message\n            }\n        }\n    }\n"]))),I=Object(N.a)(v||(v=Object(y.a)(["\n    query($input: GetRunLogsInput!) {\n        get_runlogs(input: $input) {\n            id\n            level\n            time\n            message\n            task_id\n            flow_id\n            taskrun_id\n            flowrun_id\n            agent_id\n        }\n    }\n"]))),R=(Object(N.a)(w||(w=Object(y.a)(["\n    mutation($input: FlowRunInput!) {\n        update_flowrun(input: $input) {\n            id\n        }\n    }\n"]))),n(96)),E=n(547),F=Object(o.a)((function(e){return Object(u.a)({root:{height:"100px",width:"100%"}})}));var L=function(e){var t=e.flowrun,n=e.setFlowRun,a=e.activeFlowrun,i=(F(),"tensorsite-card ".concat(a&&a.id===t.id?"active":""));return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",onClick:function(){return n(t)},children:t.name})})},P=n(26),z=n(274),D=n(552),G=n(565),$=n(553),B=n(28),A=n(23),M=n(268),q=n.n(M),H=n(269),W=n.n(H),V=n(183),Y=n(148);function J(e,t,n,a){if(n<=0)return[];for(var i=t/(n+=1),c=[],r=0,l=0;l<n;l++)r+=i,c.push({top:r});return c}function Z(e){var t=e.data,n=e.children,a=e.className,i=e.width,c=void 0===i?100:i,r=e.height,l=void 0===r?100:r,o=e.isCircle,u=void 0!==o&&o,j=t,d=J(0,l,j.input.length),h=j.input.map((function(e,t){return Object(b.jsx)(A.d,{type:"target",id:e,position:A.f.Left,style:Object(P.a)({background:"red"},d[t])},e)})),f=J(0,l,j.output.length),O=j.output.map((function(e,t){return Object(b.jsx)(A.d,{type:"source",position:A.f.Right,id:e.id,style:Object(P.a)({background:"blue"},f[t])},e.id)}));return Object(b.jsxs)(s.a,{className:a,height:l,width:c,style:{borderRadius:u?"50%":"1%",padding:0},children:[h,n,O]})}var K=Object(a.memo)(Z),Q=n(546),U=Object(o.a)((function(e){return Object(u.a)({root:{padding:"5px",width:"100%",overflow:"hidden",flexWrap:"nowrap",justifyContent:"start",height:"80px"}})})),X=Object(o.a)((function(e){return Object(u.a)({root:{padding:"5px",color:"white",background:"#3474e0",opacity:.8,borderRadius:"10%",textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"}})}));function ee(e){var t=e.task,n=U(),i=Object(h.a)(C,{variables:{input:{flowrun_id:[t.flowrun_id],task_id:[t.id]}}}),c=i.loading,r=i.error,l=i.data,o=i.stopPolling,u=i.startPolling;Object(a.useEffect)((function(){return u(2e3),function(){o()}}),[]);var f=[];if(c||r)f=Array(5).fill(null);else{var O,x=new Map,p=Object(Y.a)(l.get_taskruns);try{for(p.s();!(O=p.n()).done;){var g=O.value.state.state_type;x.has(g)||x.set(g,{state:g,count:0}),x.get(g).count+=1}}catch(m){p.e(m)}finally{p.f()}x.forEach((function(e,t){f.push(e)}))}return Object(b.jsx)(j.a,{container:!0,direction:"column",className:n.root,children:f.map((function(e,t){return e?Object(b.jsxs)(s.a,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:[Object(b.jsx)(s.a,{children:Object(b.jsx)(d.a,{variant:"subtitle2",children:e.count})}),Object(b.jsx)(s.a,{style:{marginLeft:5,marginRight:5},children:Object(b.jsx)(Q.a,{style:{height:8,width:15}})}),Object(b.jsx)(s.a,{children:Object(b.jsx)(d.a,{variant:"subtitle2",children:e.state})})]},e.state):Object(b.jsxs)(s.a,{width:"100%",display:"flex",alignItems:"center",children:[Object(b.jsx)(E.a,{variant:"circle",height:"9px",width:"9px"}),Object(b.jsx)(E.a,{variant:"text",width:"100%"})]},t)}))})}var te=function(e){var t=X(),n=Object(A.j)((function(e){return e.transform})),a=Object(l.a)(n,3)[2]>=1.5,i=e.data,c=i.width,r=i.height,o=i,u=o.name.replace("Operator","").replace(/\[.*\]/g,"");return Object(b.jsx)(K,Object(P.a)(Object(P.a)({},e),{},{className:"".concat(t.root," nowheel"),height:r,width:c,children:Object(b.jsxs)(s.a,{width:"100%",children:[Object(b.jsx)(s.a,{children:Object(b.jsx)(d.a,{variant:"h5",children:u})}),Object(b.jsx)(s.a,{children:a&&i.flowrun_id?Object(b.jsx)(ee,{task:o}):""})]})}))},ne=Object(o.a)((function(e){return Object(u.a)({root:{color:"white",background:"#455064",borderRadius:"10%",textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"}})}));function ae(e){var t=e.id,n=e.data,a=n.width,i=n.height,c=ne();return Object(b.jsxs)(s.a,{className:c.root,height:"".concat(i,"px"),width:"".concat(a,"px"),children:[Object(b.jsx)(s.a,{width:"100%",children:Object(b.jsx)(d.a,{children:"Channel"})}),Object(b.jsx)(A.d,{type:"source",position:A.f.Right,id:t,style:{background:"blue"}})]})}var ie=Object(a.memo)(ae),ce=Object(o.a)((function(e){return Object(u.a)({root:{padding:"5px",color:"white",background:"#ff6f00",borderRadius:"10%",textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"}})}));function re(e){var t=ce(),n=e.data,a=e.isCircle,i=void 0!==a&&a,c=n.width,r=n.height,l=n.name.replace("Operator","").replace(/\[.*\]/g,"");return Object(b.jsx)(K,Object(P.a)(Object(P.a)({},e),{},{isCircle:i,className:t.root,width:c,height:r,children:Object(b.jsx)(s.a,{width:"100%",overflow:"hidden",children:Object(b.jsx)(d.a,{children:l})})}))}var le=Object(a.memo)(re),se=Object(o.a)((function(e){return Object(u.a)({controls:{position:"relative",top:"10px",left:"10px",zIndex:99999999999}})})),oe={stroke:"#fff"},ue={taskNode:te,operatorNode:le,channelNode:ie};var je=new V.graphlib.Graph;je.setDefaultEdgeLabel((function(){return{}}));var de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB",n="LR"===t;return je.setGraph({rankdir:t}),e.forEach((function(e){Object(A.i)(e)?je.setNode(e.id,{width:e.data.width,height:e.data.height}):je.setEdge(e.source,e.target)})),Object(V.layout)(je),e.map((function(e){if(Object(A.i)(e)){var t=je.node(e.id);e.targetPosition=n?A.f.Left:A.f.Top,e.sourcePosition=n?A.f.Right:A.f.Bottom,e.position={x:t.x-e.data.width/2+Math.random()/1e3,y:t.y-e.data.height/2}}return e}))};var he=function(e){var t=e.flow,n=e.flowrun,i=(se(),Object(a.useState)(null)),c=Object(l.a)(i,2),r=c[0],o=c[1],u=Object(a.useState)([]),j=Object(l.a)(u,2),d=j[0],h=j[1];Object(a.useEffect)((function(){var e=function(e,t){if(!e)return[];var n=Object(B.a)(e.tasks),a=[],i=[],c=new Map;n.forEach((function(e){e.output.forEach((function(t){c.set(t.id,e.id)}))}));var r=new Map;e.edges.forEach((function(e,t){var n=e.channel_id,l=e.task_id;r.has(l)||r.set(l,[]);var s=r.get(l),o="".concat(n,"-").concat(s.length);s.push(o),c.get(n)||(c.set(n,n),i.push({id:n,type:"channelNode",data:{label:"Input Channel",width:50,height:25},position:{x:0,y:0},sourcePosition:"right"})),a.push({id:"".concat(n,"|").concat(l,"|").concat(t),source:c.get(n),target:l,sourceHandle:n,targetHandle:o,animated:!0})}));var l=n.map((function(e){var n=e.context.task_config.name.startsWith("Operator");return{id:e.id,type:n?"operatorNode":"taskNode",data:Object(P.a)(Object(P.a)({},e),{},{input:r.get(e.id)||[],width:n?40:80,height:n?40:120,flowrun_id:n||!t?null:t.id}),position:{x:0,y:0}}}));return[].concat(Object(B.a)(l),i,a)}(t,n),a=de(e,"LR");h(a)}),[t,n]),Object(a.useEffect)((function(){r&&d.length>0&&r.fitView()}),[t,d.length]);var f=Object(a.useCallback)((function(e){}),[]),O=Object(a.useCallback)((function(e){r||o(e)}),[r]),x=Object(a.useCallback)((function(e){var t=de(d,e);h(t)}),[d]);return Object(b.jsx)(s.a,{height:"100%",width:"100%",children:Object(b.jsx)(A.g,{children:Object(b.jsxs)(A.h,{elements:d,onConnect:f,onLoad:O,nodeTypes:ue,connectionLineStyle:oe,connectionLineType:A.a.SmoothStep,snapToGrid:!0,snapGrid:[2,2],defaultZoom:1,onlyRenderVisibleElements:!0,children:[Object(b.jsx)(A.e,{nodeStrokeColor:function(e){return"taskNode"===e.type?"#3474e0":"operatorNode"===e.type?"#ff6f00":"channelNode"===e.type?"red":"#fff"},nodeColor:function(e){return"taskNode"===e.type?"#3474e0":"operatorNode"===e.type?"#ff6f00":"channelNode"===e.type?"#455064":"#fff"}}),Object(b.jsxs)(A.c,{children:[Object(b.jsx)(A.b,{onClick:function(){return x("LR")},children:Object(b.jsx)(q.a,{})}),Object(b.jsx)(A.b,{onClick:function(){return x("TB")},children:Object(b.jsx)(W.a,{})})]})]})})})};var be=function(e){return Object(b.jsx)(he,Object(P.a)({},e))},fe=n(189),Oe=n(192),xe=n(153),pe=Object(o.a)((function(){return Object(u.a)({root:{alignItems:"center",lineHeight:"24px",width:"100%",height:"100%",position:"relative",display:"flex","& .cellValue":{whiteSpace:"nowrap",overflow:"auto",textOverflow:"ellipsis"}}})})),ge=i.a.memo((function(e){var t=e.width,n=e.value,a=i.a.useRef(null),c=i.a.useRef(null),r=i.a.useRef(null),s=i.a.useState(null),o=Object(l.a)(s,2),u=o[0],j=o[1],h=pe(),f=i.a.useState(!1),O=Object(l.a)(f,2),x=O[0],p=O[1],g=i.a.useState(!1),m=Object(l.a)(g,2),v=m[0],w=m[1];return i.a.useEffect((function(){if(x)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||p(!1)}}),[p,x]),Object(b.jsxs)("div",{ref:a,className:h.root,onMouseEnter:function(){var e=Object(xe.c)(r.current);w(e),j(c.current),p(!0)},onMouseLeave:function(){p(!1)},children:[Object(b.jsx)("div",{ref:c,style:{height:1,width:t,display:"block",position:"absolute",top:0}}),Object(b.jsx)("div",{ref:r,className:"cellValue",children:n}),v&&Object(b.jsx)(Oe.a,{open:x&&null!==u,anchorEl:u,style:{width:t,marginLeft:-17},children:Object(b.jsx)(fe.a,{elevation:1,style:{minHeight:a.current.offsetHeight-3},children:Object(b.jsx)(d.a,{variant:"body2",style:{padding:8,overflowWrap:"anywhere"},children:n})})})]})}));var me=[{field:"level",headerName:"Level"},{field:"message",headerName:"Message",flex:1,renderCell:function(e){return Object(b.jsx)(ge,{value:e.value?e.value.toString():"",width:400})}},{field:"time",headerName:"Time",type:"number"},{field:"id",headerName:"ID"},{field:"task_id",headerName:"TaskID",hide:!0},{field:"flow_id",headerName:"FlowID",hide:!0},{field:"taskrun_id",headerName:"TaskRunID",hide:!0},{field:"flowrun_id",headerName:"FlowRunID",hide:!0},{field:"agent_id",headerName:"AgentID",hide:!0}];function ve(){return Object(b.jsx)(fe.a,{children:"Logs filter"})}var we=function(e){e.flow;var t=e.flowrun,n=Object(h.a)(I,{variables:{input:{flowrun_id:t?[t.id]:["NoSuchId"]}}}),a=n.loading,i=(n.error,n.data);return Object(b.jsxs)(s.a,{height:"100%",children:[Object(b.jsx)(ve,{}),Object(b.jsx)(s.a,{height:"80%",style:{overflow:"auto"},children:Object(b.jsx)(xe.a,{rows:a?[]:i.get_runlogs,columns:me,autoHeight:!0,loading:!0,components:{Toolbar:xe.b}})})]})},ke=Array(15).fill(null),ye=Object(o.a)((function(e){return Object(u.a)({taskrunsPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})}));Object(o.a)((function(e){return Object(u.a)({})}));function Ne(e){var t=e.taskrun,n=e.activeTaskrun,a=e.setTaskrun,i="tensorsite-card ".concat(n&&n.id===t.id?"active":"");return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",height:"100%",onClick:function(){return a(t)},children:t.id})})}var _e=function(e){var t=e.flowrun,n=e.task,i=ye(),c=Object(a.useState)(null),r=Object(l.a)(c,2),o=r[0],u=r[1],f=Object(h.a)(T,{variables:{input:{flowrun_id:t?[t.id]:["NOT_SET"],task_id:n?[n.id]:["NOT_SET"]}}}),O=f.data,x=f.loading,p=f.error,g=f.startPolling,m=f.stopPolling;Object(a.useEffect)((function(){return t&&n&&g(2e3),function(){m()}}),[t,n]);var v=t&&n?x||p?ke:O.get_taskruns:[],w=Object(b.jsxs)(j.a,{className:i.taskrunsPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:i.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h5",children:"TaskRuns"})})}),Object(b.jsx)(j.a,{className:i.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:v.map((function(e,t){return e?Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(Ne,{taskrun:e,setTaskrun:u,activeTaskrun:o})},e.id):Object(b.jsx)(j.a,{item:!0,children:Object(b.jsxs)(s.a,{height:"100px",children:[Object(b.jsx)(E.a,{variant:"text",width:"40%"}),Object(b.jsx)(E.a,{variant:"text"}),Object(b.jsx)(E.a,{variant:"rect",height:"60%"})]})},t)}))})]});return Object(b.jsx)(s.a,{height:"100%",width:"100",children:w})},Se=Object(o.a)((function(e){return Object(u.a)({tasksPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})})),Ce=Object(o.a)((function(e){return Object(u.a)({})}));function Te(e){var t=e.task,n=e.setTask,a=e.activeTask,i=(Ce(),"tensorsite-card ".concat(a&&a.id===t.id?"active":""));return Object(b.jsx)(s.a,{className:i,height:"100px",children:Object(b.jsx)(s.a,{className:"tensorsite-content",height:"100%",onClick:function(){return n(t)},children:t.name})})}var Ie=function(e){var t=e.flow,n=e.flowrun,i=Se(),c=Object(a.useState)(null),r=Object(l.a)(c,2),o=r[0],u=r[1],h=(t?t.tasks:[]).filter((function(e){return!e.name.startsWith("Operator")}));Object(a.useEffect)((function(){!o&&h.length>0?u(t.tasks[0]):t||u(null)}),[t]);var f=Object(b.jsxs)(j.a,{className:i.tasksPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:i.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h5",children:"Tasks"})})}),Object(b.jsx)(j.a,{className:i.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:h.map((function(e){return Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(Te,{task:e,activeTask:o,setTask:u})},e.id)}))})]});return Object(b.jsx)(s.a,{height:"100%",width:"100%",children:Object(b.jsxs)(R.a,{split:"vertical",defaultSize:"50%",maxSize:600,minSize:100,style:{height:"100%"},children:[Object(b.jsx)(s.a,{height:"100%",children:f}),Object(b.jsx)(s.a,{height:"100%",children:Object(b.jsx)(_e,{flowrun:n,task:o})})]})})},Re=["children","value","index"];function Ee(e){var t=e.children,n=e.value,a=e.index,i=Object(z.a)(e,Re);return Object(b.jsx)("div",Object(P.a)(Object(P.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),{},{style:{height:"100%"},children:n===a&&Object(b.jsx)(s.a,{height:"100%",children:t})}))}function Fe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Le=Object(o.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column"}}}));function Pe(e){var t=e.flow,n=e.flowrun,a=Le(),c=i.a.useState(0),r=Object(l.a)(c,2),o=r[0],u=r[1];return Object(b.jsxs)(s.a,{className:a.root,height:"100%",children:[Object(b.jsx)(D.a,{position:"static",children:Object(b.jsxs)(G.a,{value:o,onChange:function(e,t){u(t)},children:[Object(b.jsx)($.a,Object(P.a)({label:"Graph"},Fe(0))),Object(b.jsx)($.a,Object(P.a)({label:"Tasks"},Fe(1))),Object(b.jsx)($.a,Object(P.a)({label:"Logs"},Fe(2)))]})}),Object(b.jsx)(Ee,{value:o,index:0,children:Object(b.jsx)(be,{flow:t,flowrun:n})}),Object(b.jsx)(Ee,{value:o,index:1,children:Object(b.jsx)(Ie,{flow:t,flowrun:n})}),Object(b.jsx)(Ee,{value:o,index:2,children:Object(b.jsx)(we,{flow:t,flowrun:n})})]})}var ze=Object(o.a)((function(e){return Object(u.a)({flowrunsPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})}));var De=function(e){var t=e.flow,n=e.flowruns,i=ze(),c=Object(a.useState)(null),r=Object(l.a)(c,2),o=r[0],u=r[1];Object(a.useEffect)((function(){u(null)}),[t]),console.log(o);var h=Object(b.jsxs)(j.a,{className:i.flowrunsPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:i.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h4",children:"Flow Runs"})})}),Object(b.jsx)(j.a,{className:i.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:n.map((function(e,t){return e?Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(L,{flowrun:e,setFlowRun:u,activeFlowrun:o})},e.id):Object(b.jsx)(j.a,{item:!0,children:Object(b.jsxs)(s.a,{height:"100px",children:[Object(b.jsx)(E.a,{variant:"text",width:"40%"}),Object(b.jsx)(E.a,{variant:"text"}),Object(b.jsx)(E.a,{variant:"rect",height:"60%"})]})},t)}))})]});return Object(b.jsxs)(R.a,{split:"vertical",defaultSize:"15vw",maxSize:300,minSize:100,children:[Object(b.jsx)(s.a,{height:"100%",children:h}),Object(b.jsx)(s.a,{height:"100%",children:Object(b.jsx)(Pe,{flow:t,flowrun:o})})]})},Ge=n(7),$e=n(11),Be=n(566),Ae=n(569),Me=Object(Ge.a)((function(e){return{root:{backgroundColor:e.palette.grey[100],height:e.spacing(3),color:e.palette.grey[800],fontWeight:e.typography.fontWeightRegular,"&:hover, &:focus":{backgroundColor:e.palette.grey[300]},"&:active":{boxShadow:e.shadows[1],backgroundColor:Object($e.c)(e.palette.grey[300],.12)}}}}))(Ae.a);var qe=function(e){var t=e.pathList,n=e.onClick;return Object(b.jsx)(Be.a,{children:t.map((function(e){return Object(b.jsx)(Me,{component:"a",href:e.link,label:e.label,icon:e.icon,onClick:n(e.label)},e.label)}))})},He=n(271),We=n.n(He),Ve=n(116),Ye=n.n(Ve),Je=Array(15).fill(null),Ze=[{link:"#",label:"Home",icon:Object(b.jsx)(We.a,{})},{link:null,label:"Flow",icon:Object(b.jsx)(Ye.a,{})},{link:null,label:"Task",icon:Object(b.jsx)(Ye.a,{})},{link:null,label:"FlowRun",icon:Object(b.jsx)(Ye.a,{})},{link:null,label:"TaskRun",icon:Object(b.jsx)(Ye.a,{})}],Ke=Object(o.a)((function(e){return Object(u.a)({flowsPanel:{height:"100%"},panel:{},grid:{flex:"1 1 auto",overflowY:"auto"},gridItem:{width:"100%"}})}));var Qe=function(e){var t=e.flows,n=Ke(),i=Object(a.useState)(null),c=Object(l.a)(i,2),r=c[0],o=c[1],u=Object(a.useState)(Ze),f=Object(l.a)(u,2),O=f[0],x=(f[1],r?[r.id]:[]),p=Object(h.a)(S,{variables:{input:{flow_id:x}}}),g=p.loading,m=p.error,v=p.data,w=p.startPolling,y=p.stopPolling;Object(a.useEffect)((function(){return w(4e3),function(){y()}}),[]);var N=Object(b.jsxs)(j.a,{className:n.flowsPanel,container:!0,direction:"column",wrap:"nowrap",children:[Object(b.jsx)(j.a,{className:n.panel,item:!0,children:Object(b.jsx)(s.a,{height:"50px",children:Object(b.jsx)(d.a,{variant:"h4",children:"Flows"})})}),Object(b.jsx)(j.a,{className:n.grid,item:!0,container:!0,direction:"column",wrap:"nowrap",children:t.map((function(e,t){return e?Object(b.jsx)(j.a,{item:!0,children:Object(b.jsx)(k,{flow:e,activeFlow:r,setFlow:o})},e.id):Object(b.jsx)(j.a,{item:!0,children:Object(b.jsxs)(s.a,{height:"100px",children:[Object(b.jsx)(E.a,{variant:"text",width:"40%"}),Object(b.jsx)(E.a,{variant:"text"}),Object(b.jsx)(E.a,{variant:"rect",height:"60%"})]})},t)}))})]});return Object(b.jsxs)(s.a,{height:"100%",children:[Object(b.jsx)(s.a,{height:"8vh",children:Object(b.jsx)(qe,{pathList:O,onClick:function(e){}})}),Object(b.jsx)(s.a,{height:"80vh",children:Object(b.jsxs)(R.a,{split:"vertical",defaultSize:"15vw",maxSize:300,minSize:100,style:{height:"80vh"},children:[Object(b.jsx)(s.a,{height:"100%",children:N}),Object(b.jsx)(s.a,{height:"100%",children:Object(b.jsx)(De,{flow:r,flowruns:g||m?Je:v.get_flowruns})})]})})]})},Ue=Array(15).fill(null),Xe=Object(o.a)((function(e){return Object(u.a)({panel:{height:"100%",width:"100%"}})}));var et=function(){Xe();var e=Object(h.a)(_,{variables:{input:{}},pollInterval:5e3}),t=e.loading,n=e.error,a=e.data;return Object(b.jsx)(s.a,{height:"100%",width:"100%",children:Object(b.jsx)(Qe,{flows:t||n?Ue:a.get_flows})})},tt=n(554),nt=n(195),at=n(551),it=n(184),ct=n.n(it),rt=n(99),lt=n(272),st=n.n(lt),ot=Object(o.a)((function(e){return Object(u.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:200,flexDirection:"row",zIndex:999999999999},input:{flex:1},iconButton:{padding:10},divider:{height:28,margin:4}})})),ut=Object(o.a)((function(e){return Object(u.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function jt(e){var t=e.server,n=e.setServer,i=ot(),c=Object(a.useState)(t),r=Object(l.a)(c,2),s=r[0],o=r[1];return Object(b.jsxs)(fe.a,{className:i.root,children:[Object(b.jsx)(rt.a,{className:i.iconButton,children:Object(b.jsx)(ct.a,{})}),Object(b.jsx)(nt.a,{className:i.input,placeholder:"Server address",defaultValue:t,onChange:function(e){o(e.target.value)}}),Object(b.jsx)(tt.a,{className:i.divider,orientation:"vertical"}),Object(b.jsx)(rt.a,{color:"primary",className:i.iconButton,onClick:function(){n(s)},children:Object(b.jsx)(st.a,{})})]})}var dt=function(e){var t=e.server,n=e.setServer,a=ut();return Object(b.jsx)(s.a,{className:a.root,children:Object(b.jsx)(D.a,{position:"fixed",color:"secondary",children:Object(b.jsxs)(at.a,{children:[Object(b.jsx)(rt.a,{edge:"start",className:a.menuButton,children:Object(b.jsx)(ct.a,{})}),Object(b.jsx)(d.a,{variant:"h6",className:a.title,children:"Flowsaber"}),Object(b.jsx)(jt,{server:t,setServer:n})]})})})},ht=n(560),bt=n(563),ft=n(559),Ot=n(548),xt=n(93),pt=Object(xt.a)({palette:{primary:{main:"#ff6f00"},secondary:{main:"#fff"}},typography:{fontSize:15}});var gt=function(){var e=Object(a.useState)("https://flowsaber.herokuapp.com/graphql/"),t=Object(l.a)(e,2),n=t[0],i=t[1],c=new ht.a({uri:n,cache:new bt.a});return Object(b.jsx)(Ot.a,{theme:pt,children:Object(b.jsxs)(s.a,{className:"App",height:"100vh",children:[Object(b.jsx)(s.a,{height:"10vh",children:Object(b.jsx)(dt,{server:n,setServer:i})}),Object(b.jsx)(ft.a,{client:c,children:Object(b.jsx)(et,{})})]})})},mt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,571)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(gt,{})}),document.getElementById("root")),mt()}},[[489,1,2]]]);
//# sourceMappingURL=main.bd9ff71c.chunk.js.map